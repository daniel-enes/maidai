<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      layout:decorate="~{components/layout}">
<head>
    <title>Pessoa</title>
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>
<body>
<main th:object="${advisor}" class="light flex-grow-8 padding-20"  layout:fragment="content">

<div class="profile-header">
    <div class="avatar">
        <i class="fas fa-user"></i>
    </div>
    <div class="user-info">
        <h1 th:text="*{name}"></h1>
        <p>Orientador</p>
    </div>
</div>

<div class="profile-content">
    <!-- PERSONAL INFORMATIONS -->
    <div class="card">
        <h2><i class="fas fa-user-circle"></i> Informações pessoais </h2>
        <div class="info-group">
            <label>Nome completo</label>
            <span th:text="*{name}"></span>
        </div>
        <div class="info-group">
            <label>Telefone</label>
            <span th:text="*{phone} ?: 'Nenhum número registrado'"></span>
        </div>
        <div class="info-group">
            <label>Email</label>
            <span th:text="*{email} ?: 'Nenhum e-mail registrado'"></span>
        </div>
        <div class="info-group">
            <label>CPF</label>
            <span th:text="*{cpf} ?: 'Nenhum CPF registrado'"></span>
        </div>
    </div>

    <!-- Project Information related to Scholarship -->
    <div class="card">
        <h2><i class="fas fa-user-circle"></i> Pós-Graduação </h2>

        <div th:replace="~{components/alert :: alert}"></div>

        <div th:if="${#lists.isEmpty(advisor.ppgList)}">
            <mark>Nenhum PPG associado</mark>
        </div>

        <div class="card-subcontainer">

            <div class="card-item" th:each="ppg : ${advisor.ppgList}">
                <p>
                    <span th:text="${ppg.name}"></span>
                    <a th:href="@{/people/{id}/ppgs/{ppgId}(id=${advisor.id}, ppgId=${ppg.id})}"
                       th:data-url="@{/people/{id}/ppgs/{ppgId}(id=${advisor.id}, ppgId=${ppg.id})}"
                       onclick="return deleteEntity(this.getAttribute('data-url'), event)"
                       role="button"
                       aria-label="Remover orientador o PGG"
                    >
                        <svg class="vertical-align-middle" width="20" height="20" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--!Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.--><path fill="#03a696" d="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"/></svg>
                    </a>
                </p>
            </div>

            <div class="">
                <h3>Adicionar orientador a um PPG</h3>
                <fieldset>
                    <p th:if="${#lists.isEmpty(ppgList)}">Nenhum programa de Pós-graduação encontrado. Para visualizar os programas
                        disponíveis, certifique-se de já ter realizado algum <a th:href="@{/ppgs/create}">cadastro de programa de Pós-graduação</a>.
                    </p>
                    <form th:if="${!ppgList.empty}" method="post" th:action="@{/people/{id}/ppgs(id=${advisor.id})}">

                        <!--<input type="hidden" name="_method" value="patch">-->
                        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

                        <div>
                            <select id="ppgId" name="ppgId" required>
                                <option value="">--- Selecione um programa de Pós-graduação ---</option>
                                <option th:each="ppg : ${ppgList}"
                                        th:value="${ppg.id}"
                                        th:text="${ppg.name}">
                                </option>
                            </select>
                        </div>

                        <div>
                            <button type="submit" class="button success font-light">
                                Adicionar
                            </button>
                        </div>
                    </form>
                </fieldset>
            </div>

        </div>
    </div>

</div>

</main>
</body>
</html>